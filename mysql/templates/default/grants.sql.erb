<% (@cluster_clients - @hosts).each do |client| -%>
  grant all privileges on <%= @settings[:database] %>.* to root@'<%= Resolv.getaddress(client) %>' identified by '<%= node[:mysql][:server_root_password] %>';
<% end -%>
<%# Remove non-existing servers -%>
<% (@hosts - @cluster_clients).each do |client| -%>
  <% next if client == '%' -%>
  revoke all privileges on <%= @settings[:database] %>.* from root@'<%= Resolv.getaddress(client) %>';
<% end -%>